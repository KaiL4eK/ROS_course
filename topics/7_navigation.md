# Навигация роботов

Весь стек программ, необходимый для навигации в ROS реализован в пакете move_base. 
В этой части постараемся разобраться из чего он состоит, как работает и как его настраивать.
Но в начале разберемся, что теоретически нужно для эффективной навигиции.

### Что такое навигации?
Во-первых, следует определить, что здесь будем понимать под навигацией. Навигация - это область исследования, 
которая фокусируется на процессе мониторинга и управления перемещением корабля или транспортного средства из одного места в другое (с)Wiki. 
Из такого определения можно сразу же сделать два выводы. Навигация занимается лишь вопросом перемещения из одной точки вдругу, включая поиск пути. 
При этом она игнорирует вопросы, связанные с определением положения и картографирование.
Из этого следует, что для того, чтобы запустить навигацию, первоначально необходимо поднять SLAM и затем предоставить карту и текущее положение в навигационный стек.

### Из чего состоит навигация?
Основной составляющей навигации являются алгоритмы поиска пути. Они отвечают за то, что бы навигационный стек непосредственно выполнял свою прямую функцию.
В уже устоявшемся представлении поиск пути осуществляется в два этапа: глобальное планирование и локальное планирование.

Глобальный планировщик отвечает за генерацию плана движения от стартовой точки до конечной. И теоретически может вообще не обновляться в процессе движения, либо обновляться, но очень редко. 
Передлокальным планировщиком же стоит цель безопасно провести робота через небольшие локальные участки метсности, избегая периодически возникающие препятствия. 
То есть по сути в определенный момент времени выделяется некоторая область на карте, внутрик которой сокальный планировщик строит путь от текущего положения робота к точке глобального плана на границе локальной карты. И этот процесс повторяется довольно часто (обоычно 5-10 Гц).

Часто бывает так, что использование в чистом виде нарисованной карты системой картографирования (SLAM) не достаточно.
Для того, чтобы робот мог безопасно объехать препятствие, необходимо учесть его габариты и задать безопасное расстрояние до препятствия. В этом помогаю карты стоимости (costmap), которые также как и планировщики бывают локальными и глобальными, и соответственно образуются пары: локальный планировщик строит путь на локальной карте, а глобальный на глобальной.  

### Общие настройки move_base
В целом навигационный пакет имеет слишком большое количество параметров. Поэтому определять их все в launch-файле не рекомендуется. Для этого существуюм конфигурационные файлы с расширением `*.yaml`. Для использования таких файлов используется следующий синтаксис:
```
node_name:
 param_name: value
 group_param:
  param_name: value
```
Для загрузки конфигурационного файла внутри инициализации ноды нужна следующая команда:
```
<rosparam file="$(find <package_name>)/.../path/.../<file_name>.yaml" command="load" ns="<namespace_name>" />
```
