# My First Package!

- [Почему пакеты - это важно?](#почему-пакеты---это-важно)
- [Как мне создать локальный workspace?](#как-мне-создать-локальный-workspace)
- [Готовим тарелку!](#готовим-тарелку)

Привет, до этого момента мы запускали уже готовые программы в разных терминалах, чтобы все работало. Давай теперь начнем организовывать свое рабочее место, чтобы творить свои интересные штуки!

Например, мы достаточно накатались с черепашкой и хотим сделать своего робота в симуляторе. Робота, который приносит холодные напитки из холодильника! Это же надо не только уметь двигаться к цели, но и управлять манипуляторами (руками робота), а на черепашке такого нету =( Остается только творить самим!

Или нам подходит черепашка, но хочется для построения карты использовать другой датчик/другую программу для картографирования.

Или, у нас уже есть робот в реальном мире, но с ним опасно/долго постоянно работать (заряжать приходится, возвращать на начальную точку и т.д.) и мы хотим сделать в симуляторе, чтобы настраивать программы и тестировать работу программ на роботе!

Или...

В практике можно встретить очень много ситуаций, когда нам нужно сделать что-то свое, используя готовые решения (модифицировать их) или совсем с нуля создать. Для этого нам надо познакомиться с понятиями **пакета** и **рабочего пространства (workspace)** в ROS.

## Почему пакеты - это важно?

Представь себе огромный шведский стол! На нем есть разные блюда разной кухни - роллы, пицца, хинкали, борщ и т.д.

Обычно, мы привыкли приходить к столу с подносом, накладывать на тарелки блюда (не смешивая их!) и потом с тарелками на подносе идти за стол. Отлично, минутку представим вкусный стол, как мы отведаем еду и, если голод напомнил о себе - сходи покушай =)

<p align="center">
<img src=../assets/where_are_you.jpg />
</p>

Мы можем продолжать? =)

Так вот давай теперь представим легкую альтернативу:
- Блюдо - это полезные материалы, модели в симуляторе, программы, чего там только нету.
- Тарелка - это **пакет**, мы на него накладываем конкретное блюдо, но не смешиваем с другими, потому что будет невкусно!
- Твой стол - это рабочее пространство, на котором размещаются тарелки и ведется работа (кушаем-с).

По сути, главная суть аналогии в том, что по пакетам мы раскладываем материалы (коды программ, конфигурации, описания, модели в симуляторе) по разным темам, чтобы не скидывать все в кучу. Если сложить в кучу, то потом замучаемся разбираться, что и где находится!

То есть, если мы хотим сделать своего робота, то мы может создать отдельный пакет для робота, при этом материалы по другим роботам будут лежать в отдельных пакетах!

Если в нашем роботе есть: телеуправление, навигация, построение карты, то можно сложить это в отдельные пакеты (как, например, у черепашки turtlebot3_teleop, turtlebot3_navigation, turtlebot3_slam).

Рабочее пространство в свою очередь просто объединяет пакеты в себе в системе (на диске).

> Первое время мы будем работать только с двумя рабочими пространствами. С первым уже знакомы - системное, в него устанавливаются все пакеты, которые мы ставим через `sudo apt install ros-noetic-...`. Второе, с которым будем работать - локальное. Там хранятся пакеты, которые мы пишем сами или собираем из исходников.

Надеюсь, важность организации кода и материалов по пакетам понятна? Есть и альтернативный путь - можете создать для всех своих работ единственный пакет и все складывать в него, но потом на своем опыте поймете, почему такой подход сложен в работе по мере роста проекта =)

## Как мне создать локальный workspace?

> Чуть подготовимся, поставим `catkin` инструмент сборки командой `sudo apt install python3-catkin-tools`

Так, ну если в системном пространстве мы уже запускали пакеты, то где находится локальное?

А его еще нету =) Его надо создать!

Сделаем это, по общей практике это делается в домашней директории пользователя:

```bash
mkdir $HOME/catkin_ws
```

> Если вы не понимаете, что делает команда `mkdir` или что значит `$HOME` - прочитайте Shell топики в нулевом разделе.

Так мы создадим директорию `catkin_ws` - это и будет нашим локальным (еще можно назвать пользовательским, так как у каждого пользователя в системе будет свое) пространством.

Но пока это не пространство, а просто папка, давайте сделаем все, чтобы ее инициализировать!

```bash
# Go внутрь
cd ~/catkin_ws
# Стартуем инициализацию
catkin init
```

И должны увидеть что-то наподобии:

```
Initializing catkin workspace in `/home/alexey/catkin_ws_course`.
------------------------------------------------------------------
Profile:                     default
Extending:             [env] /opt/ros/noetic
Workspace:                   /home/alexey/catkin_ws_course
------------------------------------------------------------------
Build Space:       [missing] /home/alexey/catkin_ws_course/build
Devel Space:       [missing] /home/alexey/catkin_ws_course/devel
Install Space:      [unused] /home/alexey/catkin_ws_course/install
Log Space:         [missing] /home/alexey/catkin_ws_course/logs
Source Space:      [missing] /home/alexey/catkin_ws_course/src
DESTDIR:            [unused] None
------------------------------------------------------------------
Devel Space Layout:          linked
Install Space Layout:        None
------------------------------------------------------------------
Additional CMake Args:       None
Additional Make Args:        None
Additional catkin Make Args: None
Internal Make Job Server:    True
Cache Job Environments:      False
------------------------------------------------------------------
Buildlisted Packages:        None
Skiplisted Packages:         None
------------------------------------------------------------------
Workspace configuration appears valid.
------------------------------------------------------------------

------------------------------------------------------------------
WARNING: Source space `/home/alexey/catkin_ws_course/src` does
not yet exist.
------------------------------------------------------------------
```

Шикарно! У нас есть рабочее пространство!

Ай-да теперь создавать наш первый пакет в этом пространстве:

## Готовим тарелку!


