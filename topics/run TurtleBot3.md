# Установка и запуск TurtleBot3.
> В вводной части уже рассказывалось об основном способе установки нужных нам пакетов. Здесь же мы воспользуемся другим методом: клонируем репозиторий с github и скомпилируем пакеты.
>	Для этого первым делом создадим рабочее пространство ROS
```
mkdir workspace
catkin_init_workspace
```
>	В появившейся в домашнем каталоге папке workspace создадим папку src и скачаем код из репозитория
```
mkdir src
git clone -b noetic-devel https://github.com/ROBOTIS-GIT/turtlebot3.git
```
> Теперь осталось только скомпилировать пакеты и можно пользоваться. Делать это нужно из папки workspace.
```
catkin_make
```

## Запуск TutrtleBot3
> Перед запуском своих пакетов или тех пакетов, которые сами собирали нужно их подтянуть в рабочее пространство ROS
```
source devel/setup.bash
```
> Запуск модели в Gazebo.
```
export TURTLEBOT3_MODEL=waffle_pi
roslaunch turtlebot3_gazebo turtlebot3_house.launch
```
> Телеуправление роботом.
```
roslaunch turtlebot3_teleop turtlebot3_teleop_key.launch 
```
>	Включение SLAM, RVIZ и построение изображения карты.
```
roslaunch turtlebot3_slam turtlebot3_slam.launch slam_methods:=hector
```
>	Для сохранения карты исследованной области можно использовать команду
```
rosrun map_server map_saver -f ~/map
```
>	Когда местность исследована, и карта изучена, можно спокойно запускать робота ездить в автономном режиме. Для этого запустим навигационный пакеты.
```
roslaunch turtlebot3_navigation turtlebot3_navigation.launch map_file:=$HOME/map.yaml
```
## А теперь сделаем все по-другому!
> Можно заметит, что такой запуск системы не очень удобен, да и не всегда есть возможность заранее исследовать местность. Поэтому попробуем сделать так, чтобы робот одновременно строил и дополнял карту, определял себя на ней и двигался к заданной цели.
> Чтобы все получилось, найдем файл `turtlebot3_navigation.launch` и закомментируем в аргумент имени файла карты (строка 4), запуск `map server` (строка 14), запуск `amcl` (строка 17), запуск `rviz` (строки 26-29).
> Теперь в 3-х разных окнах терминала запустим модель робота в `gazebo`, `slam` и наш отредактированный файл запуска навигации.
> Последним штрихом дополним окно `rviz` так, чтобы в нем отображались карта стоимости `costmap` и планируемая траектория `plan`.
> Для этого в окне `rviz` нужно нажать кнопку `add` и во вкладке `by topic` выбрать `move_base/NavfnROS/plan/Path` и `move_base/local_costmap/costmap/Map`.

![rviz_setting](../assets/rviz_setting.png)

> А в результате должно получиться что-то такое.

![turtlebot_slam_and_nav](../assets/turtlebot_slam_and_nav.png)

## Задания:
> Выбрать другого робота и попробовать с ним на другой карте проделать все те, же операции.
